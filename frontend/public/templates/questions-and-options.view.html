<template id="questions-and-options-view">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap');

    :host {
      font-family: 'Rajdhani', sans-serif;
      display: block;
      /* Cyber Defense Archives Theme Variables */
      --primary-color: #d5c9a6;
      --primary-glow: rgba(213, 201, 166, 0.3);
      --secondary-color: #3a3c2e; /* Used for some component backgrounds like forms */
      --text-color: #d5c9a6;
      --dark-bg: #1a1a14;         /* Main background color */
      --card-bg: #2a2b21;         /* Card and some element backgrounds */
      --border-color: #4a4c3e;
      --danger-color: #a65c52;
      --danger-glow: rgba(166, 92, 82, 0.3);
      --success-color: #8a9a5b;
      --success-glow: rgba(138, 154, 91, 0.3);
      --warning-color: #c7a758;
      --warning-glow: rgba(199, 167, 88, 0.3);
      --button-color: #3a3c2e;      /* Base button background */
      --button-hover: #4a4c3e;     /* Base button hover background */
      
      /* Badge colors */
      --easy-badge: #8a9a5b;
      --medium-badge: #c7a758;
      --hard-badge: #a65c52;

      /* Responsive sizing variables */
      --font-size-base: clamp(0.75rem, 1vw, 1rem);
      --font-size-small: clamp(0.625rem, 0.8vw, 0.875rem);
      --font-size-large: clamp(1rem, 1.5vw, 1.5rem);
      --font-size-xl: clamp(1.25rem, 2vw, 1.75rem);
      --spacing-xs: clamp(0.125rem, 0.25vw, 0.25rem);
      --spacing-sm: clamp(0.25rem, 0.5vw, 0.5rem);
      --spacing-md: clamp(0.5rem, 0.75vw, 0.75rem);
      --spacing-base: clamp(0.625rem, 1vw, 1rem);
      --spacing-lg: clamp(0.875rem, 1.5vw, 1.5rem);
      --spacing-xl: clamp(1.25rem, 2vw, 2rem);
      --border-radius-sm: clamp(0.125rem, 0.25vw, 0.25rem);
      --border-radius-md: clamp(0.25rem, 0.5vw, 0.5rem);
      --border-radius-lg: clamp(0.375rem, 0.75vw, 0.75rem);
      --icon-size-sm: clamp(0.75rem, 1vw, 1rem);
      --icon-size-md: clamp(1rem, 1.25vw, 1.25rem);
      --icon-size-lg: clamp(1.25rem, 1.5vw, 1.5rem);
      --container-padding: clamp(0.5rem, 1vw, 1.25rem);
      --button-height: clamp(2rem, 2.75vw, 2.75rem);
      --input-height: clamp(2rem, 2.75vw, 2.75rem);

      background-color: var(--dark-bg);
      color: var(--text-color);
      min-height: 100vh;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(58, 60, 46, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(58, 60, 46, 0.1) 0%, transparent 50%);
      font-size: var(--font-size-base);
    }

    * {
        box-sizing: border-box;
    }
    
    header:first-of-type,
    footer {
      background-color: var(--card-bg);
      color: var(--text-color);
      padding: var(--spacing-base) var(--container-padding);
      text-align: center;
      border-bottom: 0.0625rem solid var(--border-color);
    }
    header:first-of-type h1 {
        font-size: var(--font-size-large);
        margin: 0;
    }

    main.container {
      padding: var(--container-padding);
      width: 100%;
    }
    
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-xl);
      padding-bottom: var(--spacing-lg);
      border-bottom: 0.0625rem solid var(--border-color);
      flex-wrap: wrap;
      gap: var(--spacing-md);
    }

    .page-title {
      font-size: var(--font-size-xl);
      font-weight: 700;
      color: var(--primary-color);
      margin:0;
    }
     .page-title .admin-badge {
        background-color: var(--primary-color);
        color: var(--dark-bg);
        font-size: var(--font-size-small);
        padding: var(--spacing-xs) var(--spacing-sm);
        border-radius: var(--border-radius-sm);
        font-weight: 600;
        margin-left: var(--spacing-md);
        vertical-align: middle;
    }

    h1, h2, h4 {
      margin-top: 0;
      margin-bottom: var(--spacing-base);
      font-weight: 700;
      color: var(--primary-color);
    }
    h1 { font-size: var(--font-size-xl); }
    h2 { font-size: var(--font-size-large); }
    h4 { font-size: var(--font-size-base); font-weight: 600;}

    form {
      margin-bottom: var(--spacing-lg);
    }

    fieldset {
      border: 0.0625rem solid var(--border-color);
      border-radius: var(--border-radius-lg);
      padding: var(--spacing-lg);
      margin-bottom: var(--spacing-lg);
      background-color: var(--card-bg);
    }

    legend {
      font-weight: 700;
      padding: 0 var(--spacing-sm);
      color: var(--primary-color);
      font-size: var(--font-size-large);
    }

    ul {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    ul > li {
      margin-bottom: var(--spacing-base);
    }

    /* Styles for labels and inputs inside and outside modal */
    label, .form-label {
      display: block;
      margin-bottom: var(--spacing-sm);
      font-size: var(--font-size-small); /* Adjusted for consistency */
      font-weight: 600;
      color: var(--text-color);
    }

    select,
    input[type="text"],
    input[type="number"],
    textarea, /* Added textarea */
    .form-input, /* For modal consistency */
    .form-select,
    .form-textarea {
      width: 100%;
      background-color: var(--secondary-color);
      border: 0.0625rem solid var(--border-color); /* Unified border */
      color: var(--text-color);
      padding: var(--spacing-sm) var(--spacing-base);
      border-radius: var(--border-radius-md);
      font-size: var(--font-size-base);
      height: var(--input-height);
      font-family: inherit;
      transition: all 0.3s ease;
      margin-bottom: var(--spacing-sm); 
    }
    
    textarea, .form-textarea {
        height: auto;
        min-height: 80px; /* Default min-height for textareas */
        resize: vertical;
    }
    
    select, .form-select {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23d5c9a6'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right var(--spacing-base) center;
      background-size: var(--icon-size-md);
      padding-right: calc(var(--icon-size-md) + var(--spacing-base) * 2);
    }

    input[type="text"]:focus,
    input[type="number"]:focus,
    select:focus,
    textarea:focus,
    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0.3125rem var(--primary-glow);
    }

    button, .btn {
      background-color: var(--button-color);
      color: var(--text-color);
      border: 0.0625rem solid var(--border-color);
      padding: var(--spacing-sm) var(--spacing-base);
      border-radius: var(--border-radius-md);
      cursor: pointer;
      font-size: var(--font-size-base); 
      font-weight: 600; 
      display: inline-flex;
      align-items: center;
      justify-content: center; 
      gap: var(--spacing-sm);
      transition: all 0.3s ease;
      height: var(--button-height);
      min-width: 8rem; 
      text-decoration: none; 
      margin: var(--spacing-xs) 0; 
    }

    button:hover, .btn:hover,
    button:focus, .btn:focus {
      background-color: var(--button-hover);
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 0.375rem var(--primary-glow); 
    }

    button.btn-primary, .btn-primary {
      background-color: var(--secondary-color); 
      border-color: var(--primary-color);
      color: var(--primary-color); 
    }
    button.btn-primary:hover, .btn-primary:hover,
    button.btn-primary:focus, .btn-primary:focus {
      background-color: var(--primary-color); 
      color: var(--dark-bg); 
      box-shadow: 0 0 0.625rem var(--primary-glow);
    }
    
    .button-row, .action-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-md); 
      margin-top: var(--spacing-base);
    }
    .action-buttons .btn {
        font-size: var(--font-size-small); 
    }

    #add-question-section.hidden {
      display: none;
    }

    .option-item {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-base);
    }

    @media (min-width: 600px) {
      .option-item {
        flex-direction: row;
        align-items: center;
      }
      .option-item input[type="text"] { flex: 3; }
      .option-item input[type="number"] { flex: 1; max-width: 120px; }
    }

    article.card, .example-card, .stat-card {
      background-color: var(--card-bg);
      border: 0.0625rem solid var(--border-color);
      border-radius: var(--border-radius-lg);
      padding: var(--spacing-lg);
      margin-bottom: var(--spacing-lg);
      overflow: hidden; 
      transition: all 0.3s ease; 
    }
    
    article.card:hover, .example-card:hover, .stat-card:hover {
        border-color: var(--primary-color);
    }

    header.card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: calc(-1 * var(--spacing-lg)) calc(-1 * var(--spacing-lg)) var(--spacing-base) calc(-1 * var(--spacing-lg)); 
      padding: var(--spacing-base) var(--spacing-lg);
      border-bottom: 0.0625rem solid var(--border-color);
      flex-wrap: wrap; 
      gap: var(--spacing-md); 
    }

    header.card-header h2.card-title {
      margin: 0;
      font-weight: 600; 
      font-size: var(--font-size-large);
      color: var(--primary-color);
    }

    .header-actions {
      display: flex;
      gap: var(--spacing-sm);
    }
    /* Search input in card header */
    .header-actions .form-input {
        height: calc(var(--button-height) - 0.25rem); /* Align with buttons */
        margin-bottom: 0; /* Remove bottom margin if it's the only element */
        width: auto; /* Allow it to shrink or grow */
        min-width: 150px; /* Minimum width */
    }


    button.action-btn, .table-actions .action-btn {
      background: none;
      border: none;
      cursor: pointer;
      color: var(--text-color); 
      padding: var(--spacing-xs);
      font-size: var(--icon-size-md); 
      line-height: 1;
      border-radius: var(--border-radius-sm);
      transition: all 0.3s ease;
      height: auto; 
      min-width: auto; 
    }

    button.action-btn:hover, .table-actions .action-btn:hover {
      background-color: var(--secondary-color); 
      color: var(--primary-color); 
    }
    
    button.action-btn.view:hover i, .table-actions .action-btn.view:hover i { color: var(--primary-color); }
    button.action-btn.edit:hover i, .table-actions .action-btn.edit:hover i { color: var(--warning-color); }
    button.action-btn.delete:hover i, .table-actions .action-btn.delete:hover i { color: var(--danger-color); }

    .icon-view::before, .icon-edit::before, .icon-delete::before,
    .icon-plus::before, .icon-home::before, .icon-chevron-down::before, .icon-chevron-up::before,
    .icon-stat-scenarios::before, .icon-stat-questions::before, .icon-stat-active::before, .icon-stat-completed::before {
      content: "";
      display: inline-block; 
      vertical-align: middle; 
      width: var(--icon-size-sm); 
      height: var(--icon-size-sm);
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
      filter: brightness(0) saturate(100%) invert(85%) sepia(12%) saturate(500%) hue-rotate(0deg) brightness(90%) contrast(85%); 
    }
    
    .icon-view::before { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d5c9a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z'%3E%3C/path%3E%3Ccircle cx='12' cy='12' r='3'%3E%3C/circle%3E%3C/svg%3E");}
    .icon-edit::before { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d5c9a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7'%3E%3C/path%3E%3Cpath d='M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z'%3E%3C/path%3E%3C/svg%3E"); }
    .icon-delete::before { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d5c9a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='3 6 5 6 21 6'%3E%3C/polyline%3E%3Cpath d='M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2'%3E%3C/path%3E%3Cline x1='10' y1='11' x2='10' y2='17'%3E%3C/line%3E%3Cline x1='14' y1='11' x2='14' y2='17'%3E%3C/line%3E%3C/svg%3E");}
    .icon-plus::before { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d5c9a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='12' y1='5' x2='12' y2='19'%3E%3C/line%3E%3Cline x1='5' y1='12' x2='19' y2='12'%3E%3C/line%3E%3C/svg%3E"); }
    .icon-home::before { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d5c9a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z'%3E%3C/path%3E%3Cpolyline points='9 22 9 12 15 12 15 22'%3E%3C/polyline%3E%3C/svg%3E"); }
    
    .summary-icon.icon-chevron-down { 
      width: var(--icon-size-md);
      height: var(--icon-size-md);
      display: inline-block;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d5c9a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E"); 
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
      transition: transform 0.3s ease;
      filter: none; 
    }

    details.question-details {
      margin-bottom: var(--spacing-lg);
      border-radius: var(--border-radius-lg); 
      border: 0.0625rem solid var(--border-color);
      background-color: var(--card-bg); 
      padding: var(--spacing-sm) var(--spacing-base); 
    }

    details > summary {
      font-weight: 600;
      cursor: pointer;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      list-style: none; 
      padding: var(--spacing-base) 0; 
      color: var(--text-color);
    }
    details > summary::-webkit-details-marker { display: none; } 
    details > summary::marker { display: none; } 

    details[open] > summary .summary-icon.icon-chevron-down {
      transform: rotate(180deg);
    }

    .details-content {
      padding-left: var(--spacing-base); 
      border-left: 2px solid var(--primary-color); 
      margin-top: var(--spacing-base);
      padding-top: var(--spacing-sm);
      padding-bottom: var(--spacing-sm);
    }

    ul.question-options-list {
      list-style: none;
      padding-left: 0;
      margin: 0;
      margin-bottom: var(--spacing-base); 
    }

    li.question-option {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--spacing-base);
      padding: var(--spacing-sm) 0;
      border-bottom: 0.0625rem solid var(--border-color); 
      color: var(--text-color);
    }
    li.question-option:last-child {
        border-bottom: none; 
    }

    .option-content {
      flex-grow: 1;
      font-weight: 500; 
    }

    .option-points {
      font-size: var(--font-size-small);
      opacity: 0.8; 
      min-width: 4rem; 
      text-align: right;
      color: var(--primary-color); 
    }

    .option-actions {
      display: flex;
      gap: var(--spacing-sm);
    }
    .option-actions .action-btn i::before { 
        width: var(--icon-size-sm);
        height: var(--icon-size-sm);
    }

    button.add-option-btn {
      width: 100%;
      padding: var(--spacing-base); 
      border: 0.0625rem dashed var(--primary-color); 
      background-color: transparent;
      color: var(--primary-color);
      cursor: pointer;
      font-weight: 600;
      border-radius: var(--border-radius-md);
      transition: all 0.3s ease;
      font-size: var(--font-size-base);
      height: var(--button-height);
      margin-top: var(--spacing-base); 
    }

    button.add-option-btn:hover,
    button.add-option-btn:focus {
      background-color: rgba(213, 201, 166, 0.1); 
      color: var(--primary-color);
      border-style: solid; 
      outline: none;
    }
    button.add-option-btn i::before { 
        filter: brightness(0) saturate(100%) invert(85%) sepia(12%) saturate(500%) hue-rotate(0deg) brightness(90%) contrast(85%); 
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(clamp(8rem, 18vw, 12.5rem), 1fr)); /* Adjusted minmax */
      gap: var(--spacing-lg);
      margin-bottom: var(--spacing-xl);
    }

    .stat-card {
      padding: var(--spacing-base); 
    }
    .stat-card:hover {
      transform: translateY(-0.2rem); 
      box-shadow: 0 0 0.625rem rgba(0,0,0,0.1); 
    }

    .stat-label {
      font-size: var(--font-size-small);
      opacity: 0.7;
      margin-bottom: var(--spacing-sm);
      text-transform: uppercase;
      letter-spacing: 0.0625rem;
    }

    .stat-value {
      font-size: var(--font-size-xl);
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      color: var(--primary-color);
    }
    .stat-icon { 
      background: none;
      border: none;
      color: var(--text-color); 
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .stat-icon i::before { 
      width: var(--icon-size-lg);
      height: var(--icon-size-lg);
    }
    
    .icon-stat-scenarios::before { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23d5c9a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z'%3E%3C/path%3E%3C/svg%3E"); }
    .icon-stat-questions::before { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d5c9a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3'%3E%3C/path%3E%3Cline x1='12' y1='17' x2='12.01' y2='17'%3E%3C/line%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3C/svg%3E"); }
    .icon-stat-active::before { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d5c9a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2'%3E%3C/path%3E%3Ccircle cx='9' cy='7' r='4'%3E%3C/circle%3E%3Cpath d='M23 21v-2a4 4 0 0 0-3-3.87'%3E%3C/path%3E%3Cpath d='M16 3.13a4 4 0 0 1 0 7.75'%3E%3C/path%3E%3C/svg%3E"); }


    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-xs); 
      margin-bottom: var(--spacing-lg);
      border-bottom: 0.0625rem solid var(--border-color);
    }

    .tab {
      background: none;
      border: none;
      color: var(--text-color);
      padding: var(--spacing-md) var(--spacing-lg);
      cursor: pointer;
      font-size: var(--font-size-base);
      font-weight: 500;
      opacity: 0.7;
      position: relative; 
      transition: all 0.3s ease;
      border-radius: var(--border-radius-sm) var(--border-radius-sm) 0 0; 
    }

    .tab:hover {
      opacity: 1;
      background-color: var(--secondary-color); 
    }

    .tab.active {
      opacity: 1;
      font-weight: 700; 
      color: var(--primary-color); 
      background-color: var(--card-bg); 
    }

    .tab.active::after {
      content: '';
      position: absolute; 
      bottom: -0.0625rem; 
      left: 0;
      width: 100%;
      height: 0.125rem; 
      background-color: var(--primary-color);
    }

    .tab-content { display: none; }
    .tab-content.active { display: block; }

    .table-container { 
        overflow-x: auto;
        margin-top: var(--spacing-base);
    }
    .table {
      width: 100%;
      border-collapse: collapse;
      margin-top: var(--spacing-base); 
    }

    .table th, .table td {
      padding: var(--spacing-base) var(--spacing-lg); 
      text-align: left;
      border-bottom: 0.0625rem solid var(--border-color);
      font-size: var(--font-size-base);
    }

    .table th {
      font-weight: 700; 
      text-transform: uppercase;
      font-size: var(--font-size-small);
      letter-spacing: 0.05em; 
      color: var(--primary-color); 
      background-color: rgba(42, 43, 33, 0.5); 
    }
    
    .table tr:hover td { 
      background-color: var(--secondary-color); 
    }
    .table td .question-details { 
        margin-bottom: 0; 
        background-color: transparent; 
        border: none;
    }
    .table td .question-details summary {
        padding: var(--spacing-sm) 0;
    }

    /* Universal Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.75); /* Darker overlay */
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0s linear 0.3s;
    }
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
      transition: opacity 0.3s ease;
    }
    .modal-content {
      background-color: var(--card-bg);
      color: var(--text-color);
      border-radius: var(--border-radius-lg);
      border: 1px solid var(--border-color);
      padding: 0; /* Remove padding to use header/body/footer for spacing */
      width: 90%;
      max-width: 550px; /* Slightly smaller max-width */
      box-shadow: 0 8px 25px rgba(0,0,0,0.4); /* Enhanced shadow */
      transform: translateY(-20px) scale(0.95); /* Start slightly up and smaller */
      transition: transform 0.3s ease-out, opacity 0.3s ease-out; /* Smoother transition */
      opacity: 0; /* Start hidden for transition */
    }
    .modal-overlay.active .modal-content {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-base) var(--spacing-lg);
      border-bottom: 1px solid var(--border-color);
    }
    .modal-title-text { /* This ID will be targeted by JS */
      font-size: var(--font-size-large);
      font-weight: 700; /* Bolder title */
      color: var(--primary-color);
      margin: 0;
    }
    .modal-close-button { /* This ID will be targeted by JS */
      background: none;
      border: none;
      color: var(--text-color);
      font-size: calc(var(--icon-size-lg) * 1.1); /* Slightly larger close icon */
      font-weight: bold;
      cursor: pointer;
      padding: var(--spacing-xs);
      line-height: 1;
      transition: color 0.2s ease, transform 0.2s ease;
    }
    .modal-close-button:hover {
      color: var(--primary-color);
      transform: rotate(90deg);
    }
    .modal-body-content { /* This ID will be targeted by JS */
      padding: var(--spacing-lg);
      margin-bottom: 0; /* Removed default margin */
      max-height: 65vh; /* Increased max height */
      overflow-y: auto;
    }
    /* Styling for form elements within the modal, using specific classes for clarity */
    .modal-body-content .form-group {
      margin-bottom: var(--spacing-base);
    }
    /* .form-label, .form-input, .form-select, .form-textarea are already defined globally */

    .modal-footer-actions {
      display: flex;
      justify-content: flex-end;
      gap: var(--spacing-md);
      padding: var(--spacing-base) var(--spacing-lg);
      border-top: 1px solid var(--border-color);
      background-color: var(--secondary-color); /* Footer background */
      border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg); /* Rounded bottom corners */
    }
    .modal-footer-actions .btn { /* Ensure buttons in footer use general .btn styling */
        min-width: 100px; /* Give buttons a decent min-width */
    }
    .modal-footer-actions .btn-danger-outline { /* Example of an outline danger button for cancel */
        background-color: transparent;
        border-color: var(--danger-color);
        color: var(--danger-color);
    }
    .modal-footer-actions .btn-danger-outline:hover {
        background-color: var(--danger-color);
        color: var(--card-bg); /* Or var(--dark-bg) */
        box-shadow: 0 0 0.375rem var(--danger-glow);
    }


    /* Message Toast Styles (if not already globally defined and preferred here) */
    #message-container {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: var(--spacing-base) var(--spacing-lg);
        border-radius: var(--border-radius-md);
        color: var(--dark-bg); /* Default text color for messages */
        font-size: var(--font-size-base);
        opacity: 0;
        display: none;
        transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        z-index: 10000; /* Ensure it's above modals */
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        min-width: 250px;
        text-align: center;
    }
    #message-container.success { background-color: var(--success-color); }
    #message-container.error { background-color: var(--danger-color); color: var(--text-color); } /* Error text often lighter on dark bg */
    #message-container.warning { background-color: var(--warning-color); }
    #message-container.active { /* Class to trigger visibility if needed by JS */
        opacity: 1;
        display: block;
        transform: translateX(-50%) translateY(0);
    }


    @media (min-width: 768px) { 
      main.container {
        padding: var(--spacing-lg) clamp(2rem, 5vw, 4rem); 
      }
      .action-buttons {
          width: auto; 
          margin-top: 0; 
      }
      .page-header {
          flex-wrap: nowrap; 
      }
    }
  </style>

  <header> 
    <h1>Questions and Options</h1>
  </header>

  <main class="container"> 
    <section class="main-content"> 
      <header class="page-header">
        <h1 class="page-title">
          Scenario Management <mark class="admin-badge">Admin</mark>
        </h1>
        <section class="action-buttons">
          <button class="btn btn-primary" id="home-btn" title="Go to Homepage">
            <i class="icon-home" aria-hidden="true"></i> Home
          </button>
          <button class="btn btn-primary" id="create-scenario-btn" title="Add a new scenario">
            <i class="icon-plus" aria-hidden="true"></i> Create Scenario
          </button>
          <button class="btn btn-primary" id="create-question-btn" title="Add a new question">
            <i class="icon-plus" aria-hidden="true"></i> Create Question
          </button>
        </section>
      </header>

      <section class="stats-grid">
        <article class="stat-card"> 
          <h3 class="stat-label">Total Scenarios</h3>
          <p class="stat-value">
            <button class="stat-icon" aria-label="Scenarios icon"><i class="icon-stat-scenarios"></i></button> 
            <span id="scenarios-count">0</span> </p>
        </article>
        <article class="stat-card">
            <h3 class="stat-label">Total Questions</h3>
            <p class="stat-value">
                <button class="stat-icon" aria-label="Questions icon"><i class="icon-stat-questions"></i></button> 
                <span id="questions-count">0</span> </p>
        </article>
        <article class="stat-card">
            <h3 class="stat-label">Active Users</h3>
            <p class="stat-value">
                <button class="stat-icon" aria-label="Active users icon"><i class="icon-stat-active"></i></button> 
                <span id="active-users-count">0</span> </p>
        </article>
      </section>

      <nav class="tabs">
        <button class="tab active" data-tab="scenarios" type="button">Scenarios</button>
        <button class="tab" data-tab="questions" type="button">Questions</button>
      </nav>

      <section class="tab-content active" id="scenarios-tab">
        <article class="card"> 
          <header class="card-header">
            <h2 class="card-title">All Scenarios</h2>
            <div class="header-actions">
                <input type="text" id="scenario-search-input" placeholder="Search scenarios..." class="form-input">
            </div>
          </header>
          <section class="card-body">
            <div class="table-container">
              <table class="table">
                <thead>
                  <tr>
                    <th>Title</th>
                    <th>Status</th>
                    <th>Questions</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td colspan="4" style="text-align:center;">Loading scenarios...</td></tr>
                </tbody>
              </table>
            </div>
          </section>
        </article>
      </section>

      <section class="tab-content" id="questions-tab">
        <article class="card">
          <header class="card-header">
            <h2 class="card-title">All Questions</h2>
            <div class="header-actions">
                <input type="text" id="question-search-input" placeholder="Search questions..." class="form-input">
            </div>
          </header>
          <section class="card-body">
             <div class="table-container">
              <table class="table">
                <thead>
                  <tr>
                    <th>Question</th>
                    <th>Scenario</th>
                    <th>Difficulty</th>
                    <th>Options Count</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td colspan="5" style="text-align:center;">Loading questions...</td></tr>
                </tbody>
              </table>
            </div>
          </section>
        </article>
      </section>
    </section> 
  </main>

  <div class="modal-overlay" id="universal-modal">
    <div class="modal-content">
      <header class="modal-header">
        <h2 class="modal-title-text" id="modal-title">Modal Title</h2>
        <button class="modal-close-button" id="modal-close-btn" aria-label="Close modal">&times;</button>
      </header>
      <section class="modal-body-content" id="modal-body">
        <p>Modal body content goes here...</p>
      </section>
      <footer class="modal-footer-actions">
        <button class="btn btn-danger-outline" id="modal-cancel-btn" type="button">Cancel</button>
        <button class="btn btn-primary" id="modal-confirm-btn" type="button">Confirm</button>
      </footer>
    </div>
  </div>

  </template>